<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Satellite Tracker</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="logo.png" type="image/x-icon">
</head>
<body>
    <canvas id="spaceCanvas"></canvas>
    <div id="app-container" class="container">
        <header>
            <img src="logo.png" alt="Satellite Tracker Logo" id="site-logo">
            <div>
                <h1>Satellite Tracker</h1>
                <p class="subtitle">Track satellites in real-time using TLE data</p>
            </div>
        </header>
        
        <section id="input-section" class="form-section">
            <div class="form-group">
                <label for="tle-input">Satellite Data (TLE or OMM Format)</label>
                <p class="tle-instructions">Paste your satellite data (TLE format with two lines starting with "1 " and "2 ", or OMM format in JSON or KVN format) in the field below:</p>
                <textarea 
                    id="tle-input" 
                    placeholder="Enter TLE or OMM data (JSON or KVN) here."></textarea>

            </div>
            
            <button id="submit-btn">Track Satellite</button>
            
            <div id="current-location-info" class="location-info">
                Current location selected: <span id="selected-location-display">Mt Abu Observatory Gurushikhar (24.625°N, 72.715°E, 1680m)</span>
            </div>
            
            <div class="location-section-wrapper">
                <div class="location-section">
                    <div class="location-option">
                        <h3>Predefined Locations</h3>
                        <button type="button" id="use-default-location">Use Default Location</button>
                        <p style="margin: 8px 0; font-size: 0.8rem;">or</p>
                        <button type="button" id="use-browser-location">Use My Location</button>
                    </div>
                    <div class="location-option">
                        <h3>Manual Coordinates</h3>
                        <div class="coordinates">
                            <div>
                                <label for="latitude">Latitude (degrees)</label>
                                <input type="number" id="latitude" step="any" placeholder="e.g., 24.625" min="-90" max="90">
                            </div>
                            <div>
                                <label for="longitude">Longitude (degrees)</label>
                                <input type="number" id="longitude" step="any" placeholder="e.g., 72.715" min="-180" max="180">
                            </div>
                            <div>
                                <label for="altitude">Altitude (m)</label>
                                <input type="number" id="altitude" step="any" placeholder="e.g., 1680" value="168">
                            </div>
                        </div>
                        <button type="button" id="use-manual-location">Use Manual Coordinates</button>
                    </div>
                    <div class="location-option">
                        <h3>Custom Time (UTC)</h3>
                        <div class="time-selection">
                            <div class="date-time-container">
                                <div class="date-field">
                                    <label for="custom-date">Date (UTC)</label>
                                    <input type="date" id="custom-date">
                                </div>
                                <div class="time-field">
                                    <label for="custom-time">Time (UTC)</label>
                                    <input type="time" id="custom-time" value="12:00" step="1">
                                </div>
                            </div>
                        </div>
                        <button type="button" id="use-custom-time">Set Custom Time</button>
                        <button type="button" id="reset-to-current-time" style="background: linear-gradient(135deg, #ff5555, #bd93f9); margin-top: 8px;">Use Current Time</button>
                    </div>
                </div>
                <div id="location-loading" class="location-loading-overlay">
                    <div class="loading-spinner location-spinner"></div>
                    <p>Getting your location...</p>
                </div>
            </div>
            
            <div id="loading">
                <div class="loading-spinner"></div>
                <p>Calculating satellite position...</p>
            </div>
        </section>
        
        <section class="help-section">
            <h2>Help: TLE and OMM Formats</h2>
            <h3>TLE Format</h3>
            <p>Two-Line Element (TLE) sets are used to describe the orbital elements of satellites. Each TLE consists of two 69-character lines:</p>
            
            <div class="tle-format">
                <p><strong>Line 1:</strong> 1 NSSSSECCYYDDD.DDDDDDDD +/-DDDDDDDD +/-DDD.DDDDDD N EEEE</p>
                <p><strong>Line 2:</strong> 2 NSSSS IIII.IIII RRRR.RRRR RRRRRRR FFF.FFFF GGG.GGGG HHHHH.HHHHHHHH</p>
            </div>
            
            <p>Where:</p>
            <ul>
                <li>NSSSS - Satellite number</li>
                <li>E - Classification (U=Unclassified)</li>
                <li>CCYYDDD - International Designator (Century, Year, Day of year)</li>
                <li>DDDDDDDDD - Element number and revolution number</li>
                <li>IIII.IIII - Inclination (degrees)</li>
                <li>RRRR.RRRR - Right ascension of the ascending node (degrees)</li>
                <li>RRRRRRR - Eccentricity (leading zero and decimal point not included)</li>
                <li>FFFF.FFFF - Argument of perigee (degrees)</li>
                <li>GGG.GGGG - Mean anomaly (degrees)</li>
                <li>HHHHH.HHHHHHHH - Mean motion (revolutions per day)</li>
            </ul>
            
            <h3>OMM Format</h3>
            <p>Orbital Mean-Elements Message (OMM) is a newer format developed by CCSDS to replace TLEs, supporting more advanced tracking capabilities.</p>
            
            <p>Two formats are supported:</p>
            <ul>
                <li><strong>JSON Format:</strong> A structured data format with key-value pairs</li>
                <li><strong>KVN Format:</strong> A human-readable format with "key = value" pairs on separate lines</li>
            </ul>
            
            <p>You can get TLE and OMM data from sources like <a href="https://www.celestrak.org/NORAD/elements/" target="_blank">Celestrak</a>.</p>
        </section>
    </div>
    
    <!-- The results will be loaded here -->
    <div id="results-container"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/satellite.js@6.0.1/dist/satellite.min.js"></script>
    <script src="app.js"></script>
</body>
</html>